import{r as o,l as j,j as e}from"./app-CRC_HCL3.js";import{s as A}from"./DataStoreTemp-1olddnbH.js";import{e as I}from"./index-Bi1iTqyb.js";import{u as L}from"./index-DmpJc7lb.js";import{S as W}from"./Skeleton-DjqmHsVV.js";import{H as q}from"./HashLoader-CMP3RYCq.js";import"./iconBase-D1VTUtoT.js";import"./index-B8F43R27.js";import"./animation-RB9YhObT.js";function D({value:c,user:a}){var h,b,y,g;const{setGetDepositParams:N,getPaymentResponse:r,setGetPaymentResponse:w,tempSwarmData:i}=o.useContext(A),[l,p]=L(),[m,d]=o.useState(!1),[S,x]=o.useState(!1),[_,u]=o.useState(!1),[G,P]=o.useState(null),[n,k]=o.useState(null);o.useState({payment_id:Number(l.get("payment_id"))});const[t,v]=o.useState({amount:0,phone:"",user_id:a==null?void 0:a.user_id,password:"7782"}),E=s=>{H(s)},H=s=>{l.has("filter")&&(l.set("filter",s),p(l)),l.has("payment_id")&&(l.delete("payment_id"),p(l))},f=async s=>{v({...t,[s.target.name]:s.target.value})},T=s=>{d(!0),N({...s})},C=async s=>{s.preventDefault();const{user_id:F,currency:K,payment_services:{deposit:O},username:M}=a,{PaymentSystem_id:R,displayName:Z}=O.ZamtelInstant;T({amount:Number(t==null?void 0:t.amount),currency:K,service:Z,customer_id:String(F),customer_password:String(t==null?void 0:t.password)})};return o.useEffect(()=>{var s;a&&k((s=a==null?void 0:a.payment_services)==null?void 0:s.deposit.ZamtelInstant)},[a]),o.useEffect(()=>(j.isNil(r)||(d(!1),P(r),(r==null?void 0:r.result)!="OK"&&(x(!0),setTimeout(()=>{x(!1)},2e3)),(r==null?void 0:r.result)=="OK"&&(u(!0),setTimeout(()=>{u(!1)},2e3))),()=>w(null)),[r]),e.jsxs("section",{className:"flex flex-col flex-1 h-full bg-white",children:[!i&&e.jsx(W,{variant:"rectangular",animation:"wave",height:"40px"}),i&&a&&e.jsx("header",{className:" font-poppins border-b-[1px] pb-2 px-2 py-4 text-[#27393f] ",children:e.jsxs("button",{onClick:()=>E("All"),className:"flex items-center gap-1 outline-none",children:[e.jsx("span",{children:e.jsx(I,{})}),e.jsx("p",{className:"text-[14px]",children:"Select different payment system"})]})}),i&&a&&e.jsxs("div",{className:"flex-1 px-2 pt-2 pb-4 sm:max-w-[500px] mx-auto",children:[e.jsxs("h3",{className:"text-[14px] text-black select-none",children:["You have selected to deposit using"," ",e.jsx("span",{className:"text-[14px] font-medium",children:c})]}),e.jsx("p",{className:"text-[12px] w-full sm:w-3/4 mt-1 select-none text-gray-600 font-sans",children:"To successfully deposit money into your castlebet account, please enter the amount and wait for a confirmation on your mobile phone"}),e.jsxs("form",{onSubmit:C,className:"w-full pt-2 mb-5",children:[e.jsxs("div",{className:"w-full mb-2 transition-transform duration-100 ease-in-out select-none",children:[S&&e.jsx("p",{className:"text-[11px] p-2  font-sans rounded-md border-[1px] border-red-300 bg-red-100 text-red-600",children:"Failed to make a deposit, something went wrong"}),_&&e.jsx("p",{className:"text-[11px] p-2 text-gray-900 font-sans rounded-md border-[1px] border-green-300 bg-green-100",children:"A deposit request trigger has beeing sucessfully sent to your phone...."})]}),e.jsxs("div",{className:"flex flex-col mb-3",children:[e.jsxs("label",{className:"block text-[12px] text-sm text-gray-800",htmlFor:"phone",children:["Enter ",c," number"]}),e.jsx("input",{className:`bg-gray-50 border border-gray-300  rounded-lg  placeholder:text-[13px]
                       block w-full p-2.5 `,name:"phone",type:"text",id:"phone",value:t==null?void 0:t.phone,onChange:f,placeholder:"+26096 0r +26076"})]}),e.jsxs("div",{className:"flex flex-col mb-3",children:[e.jsx("label",{className:"block text-sm text-gray-900 dark:text-white",htmlFor:"amount",children:"Amount"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-800 bg-gray-200 border border-gray-300 border-e-0 rounded-s-md",children:"K"}),e.jsx("input",{className:"rounded-none rounded-e-lg bg-gray-50 border border-gray-300 placeholder:text-[13px] block w-full p-2.5 ",name:"amount",type:"Number",id:"amount",value:t==null?void 0:t.amount,onChange:f})]}),e.jsxs("p",{className:"text-[11px] py-1 text-[#27393f] text-opacity-70",children:["K",(b=(h=n==null?void 0:n.info_notes)==null?void 0:h.ZMW)==null?void 0:b.min," - K",(g=(y=n==null?void 0:n.info_notes)==null?void 0:y.ZMW)==null?void 0:g.max]})]}),e.jsxs("button",{disabled:m,className:"w-full bg-black h-[40px] rounded-md text-white flex items-center justify-center text-[13px] active:scale-95",children:[m&&e.jsx("span",{children:e.jsx(q,{color:"white",size:20})}),!m&&e.jsx("span",{children:"Deposit"})]}),e.jsx("p",{className:"sm:w-3/4 w-full mt-2 text-[12px] text-[#27393f] text-opacity-70",children:"Ensure to confirm the deposit request from your mobile phone to successfully complete the deposit process"})]}),!j.isNil(n==null?void 0:n.infotext)&&e.jsxs("div",{className:"px-2 text-gray-900 font-poppins",children:[e.jsx("p",{className:"py-1 border-b-[1px]",children:"HOW TO DEPOSIT"}),e.jsx("div",{children:n==null?void 0:n.infotext})]})]})]})}export{D as default};
