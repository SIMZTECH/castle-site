import{r as o,j as e}from"./app-CvnXDNqH.js";import{T as M}from"./index-_l9Kf6Ul.js";import{H as T}from"./index-CD-ue5hF.js";import W from"./BetEventCard-1YTwHf-M.js";import{a as H}from"./UserAuthenticationContext-DiNDjNym.js";import{f as O,g as P}from"./index-37nCpuvi.js";import"./iconBase-709gmDFl.js";import"./index-HSfTtyqq.js";import"./DateFormatter-CgdAk38a.js";function Y({cashOutCallBackHandler:k,cashOutRes:B}){var l,x,m,p,d,u,h,f,j,b,g,N,v,y,w,_,C,E,S;const{authUser:i}=o.useContext(H),[t,L]=o.useState([]),K=O(),{state:c}=P(),A=()=>{if(t.length>0){const s=[];return t[0].events.map(n=>{((n==null?void 0:n.outcome)==1||(n==null?void 0:n.outcome)==3)&&s.push(n)}),(s==null?void 0:s.length)>0?s.length:0}return 0},D=()=>{var s;if(t.length>0){const n=(s=t[0])==null?void 0:s.amount,{cash_out:a}=t[0];return a/n*100}return 0};return o.useEffect(()=>{var s,n,a;if(((n=(s=i==null?void 0:i.bet_history)==null?void 0:s.bets)==null?void 0:n.length)>0){const G=((a=i==null?void 0:i.bet_history)==null?void 0:a.bets).filter(r=>(r==null?void 0:r.id)==(c==null?void 0:c.bet_id));L(G);return}},[i]),o.useEffect(()=>{},[B]),console.log(t),e.jsxs("div",{className:"flex flex-col h-full pb-8 select-none b font-poppins",children:[e.jsxs("header",{className:"bg-[#f6f8fc] h-[40px] border-b-[1px] flex items-center px-4 relative",children:[e.jsxs("button",{onClick:()=>K("/castle-site?page=mybets&filter=open"),className:"flex items-center outline-none text-[13px] hover:underline",children:[e.jsx("span",{children:e.jsx(M,{})}),e.jsx("p",{children:"Go back"})]}),e.jsx("p",{className:"relative flex items-center justify-center flex-1 text-[13px] text-textMediumBlue font-medium",children:e.jsxs("span",{className:"absolute transform -translate-x-1/2 left-1/2",children:["BET ID ",c==null?void 0:c.bet_id]})})]}),e.jsxs("section",{className:"flex-1 overflow-y-scroll bg-white text-textMediumBlue betEventList-container",children:[(t==null?void 0:t.length)>0&&e.jsxs("div",{className:"px-4 py-2 bg-[#f6f8fc]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-primaryColor",children:e.jsx(T,{})}),e.jsxs("p",{className:"text-[12px]",children:["Events ",t.length]})]}),e.jsxs("p",{className:"text-[12px]",children:[A()," of"," ",(x=(l=t[0])==null?void 0:l.events)==null?void 0:x.length," completed"]})]}),((m=t[0])==null?void 0:m.outcome)!=5&&e.jsxs("p",{className:"flex items-center justify-between text-[12px]",children:[e.jsx("span",{children:"Odds"}),e.jsx("span",{children:(p=t[0])==null?void 0:p.k})]}),e.jsxs("p",{className:"flex items-center justify-between text-[12px]",children:[e.jsx("span",{children:"Stake"}),e.jsxs("span",{children:["K",(d=t[0])==null?void 0:d.amount]})]}),e.jsxs("p",{className:"flex items-center justify-between text-[12px]",children:[e.jsx("span",{children:"Status"}),((u=t[0])==null?void 0:u.outcome)==0&&e.jsx("span",{className:"text-[#5c5c5c] font-medium",children:"Not Resulted"}),((h=t[0])==null?void 0:h.outcome)==1&&e.jsx("span",{className:"font-medium text-red-600",children:"Lost"}),((f=t[0])==null?void 0:f.outcome)==2&&e.jsx("span",{className:"text-[#5c5c5c] font-medium",children:"void"}),((j=t[0])==null?void 0:j.outcome)==3&&e.jsx("span",{className:"text-green-600",children:"Won"}),((b=t[0])==null?void 0:b.outcome)==5&&e.jsx("span",{className:"text-green-600",children:"Cashed out"})]}),(((g=t[0])==null?void 0:g.outcome)==3||((N=t[0])==null?void 0:N.outcome)==5)&&e.jsxs("p",{className:"flex items-center justify-between text-[12px]",children:[e.jsx("span",{children:"Payout"}),e.jsxs("span",{children:["K",(v=t[0])==null?void 0:v.payout]})]}),((y=t[0])==null?void 0:y.outcome)!=3&&((w=t[0])==null?void 0:w.outcome)!=5&&e.jsxs("p",{className:"flex items-center justify-between text-[12px]",children:[e.jsx("span",{children:"Possible Winning"}),e.jsxs("span",{children:["K",(_=t[0])==null?void 0:_.possible_win]})]}),((C=t[0])==null?void 0:C.cash_out)>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("button",{onClick:()=>{var s;return k({bet_id:c==null?void 0:c.bet_id,price:(s=t[0])==null?void 0:s.k})},className:"w-[50px] shadow-buttonShadow rounded-sm active:scale-95 h-[25px] py-1 text-white text-[10px] bg-green-800",children:"Cashout"}),e.jsx("div",{className:"h-[17px] flex-1 bg-blue-100 shadow-sm relative rounded-full",children:e.jsxs("p",{style:{width:`${D()}%`},className:"absolute top-0 bottom-0 left-0 px-2 rounded-full text-center text-[12px] flex items-center justify-center text-white bg-green-800",children:["K",(E=t[0])==null?void 0:E.cash_out]})})]})]}),t.length>0&&e.jsx("div",{className:"px-4 pt-2 space-y-2 bg-white",children:(S=t[0].events)==null?void 0:S.map(s=>e.jsx(W,{eventData:s},s==null?void 0:s.bet_id))})]})]})}export{Y as default};
